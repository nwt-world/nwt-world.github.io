---
import HeaderLink from './HeaderLink.astro';
import LanguageBasedContent from "./LanguageBasedContent.svelte";
import { Image } from 'astro:assets';
import SocialLinks from './SocialLinks.astro';

import nwtLogo from '../assets/nwt.png';

---

<script>
// Load initial value
const saved = localStorage.getItem('lang') || 'en';
document.getElementById('lang-select').value = saved;

// Save on change
document.getElementById('lang-select').addEventListener('change', (e) => {
	localStorage.setItem('lang', e.target.value);
	document.documentElement.lang = e.target.value;
	window.location.href = '/';
});

</script>

<header>
	<nav>
		<h2><a href="/"><Image class="main_logo" width={512} src={nwtLogo} alt="NWT" loading="eager" /></a></h2>
		<div class="internal-links">
			<HeaderLink href="/">
				<LanguageBasedContent client:load lang="en">
					<div slot="en">Home</div>
					<div slot="es">Inicio</div>
					<div slot="ru">Домой</div>
				</LanguageBasedContent>
			</HeaderLink>
			<HeaderLink href="/country">
			<LanguageBasedContent client:load lang="en">
				<div slot="en">Countries</div>
				<div slot="es">Países</div>
				<div slot="ru">Страны</div>
			</LanguageBasedContent>
			</HeaderLink>
			<HeaderLink href="/itinerary">
			<LanguageBasedContent client:load lang="en">
				<div slot="en">Itineraries</div>
				<div slot="es">Itinerarios</div>
				<div slot="ru">Маршруты</div>
			</LanguageBasedContent>
			</HeaderLink>
		</div>
		<select id="lang-select" class="lang-select">
			<option value="en">English</option>
			<option value="es">Español</option>
			<option value="ru">Русский</option>
		</select>
		<SocialLinks hideOnMobile />

	</nav>
</header>
<style>
	header {
		margin: 0;
		padding: 0 1em;
		background: #bdcae7;
		box-shadow: 0 2px 8px rgba(var(--black), 5%);
	}
	h2 {
		margin: 0;
		font-size: 1em;
	}

	h2 a,
	h2 a.active {
		text-decoration: none;
	}
	nav {
		display: flex;
		align-items: center;
		justify-content: space-between;
	}
	nav a {
		padding: 0.5em 0.5em;
		color: var(--black);
		border-bottom: 4px solid transparent;
		text-decoration: none;
	}
	nav a.active {
		text-decoration: none;
		border-bottom-color: var(--accent);
	}

	.nice-select {
		appearance: none;
		background-color: #bdcae7;
		border: 1px solid #aa9ec8;
		padding: 6px 32px 6px 12px;
		border-radius: 6px;
		font-size: 14px;
		cursor: pointer;
		background-image: url("data:image/svg+xml;utf8,<svg fill='gray' height='16' width='16' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'><polygon points='0,0 20,0 10,12'/></svg>");
		background-repeat: no-repeat;
		background-position: right 8px center;
		background-size: 12px;
	}

	.nice-select:focus {
		outline: none;
		border-color: #4f46e5;
		box-shadow: 0 0 0 2px rgba(79, 70, 229, 0.3);
	}

	.lang-select {
		appearance: none;
		background-color: #bdcae7;
		border: 1px solid #ffffff;
		padding: 6px 36px 6px 12px;
		border-radius: 8px;
		font-size: 14px;
		color: #2b2b2b;
		cursor: pointer;

		background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 20 20'><path d='M5 7l5 6 5-6z' fill='%23666'/></svg>");
		background-repeat: no-repeat;
		background-position: right 10px center;
		background-size: 12px;
	}

	.lang-select:hover {
		background-color: #b4c3e3;
	}

	.lang-select:focus {
		outline: none;
		border-color: #4f46e5;
		box-shadow: 0 0 0 2px rgba(79, 70, 229, 0.25);
	}

    @media (max-width: 1200px) {
		.main_logo {
			display: none;
		}
	}

</style>
